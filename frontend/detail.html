<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalle del Alojamiento - BookingApp</title>
  <link rel="stylesheet" href="static/css/main.css">
  <style>
    /* Stilizzazione base per la pagina detail */
    .property-detail {
      background-color: white;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      margin-bottom: calc(var(--spacing) * 4);
    }
    .property-header {
      padding: calc(var(--spacing) * 3);
    }
    .property-title {
      margin-bottom: var(--spacing);
      color: var(--color-primary);
      font-size: 2rem;
    }
    .property-location {
      color: var(--color-text-light);
      display: flex;
      align-items: center;
      gap: 4px;
      margin-bottom: calc(var(--spacing) * 2);
    }
    .property-image {
      height: 400px;
      overflow: hidden;
    }
    .property-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .property-content {
      padding: calc(var(--spacing) * 3);
    }
    .property-price {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--color-accent);
      margin-bottom: calc(var(--spacing) * 2);
    }
    .property-description {
      line-height: 1.7;
      margin-bottom: calc(var(--spacing) * 3);
    }
    .property-map {
      margin-top: calc(var(--spacing) * 3);
      height: 300px;
      border-radius: var(--border-radius);
      overflow: hidden;
    }
    .property-map iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    /* Booking form */
    .booking-form {
      background-color: var(--color-bg-alt);
      padding: calc(var(--spacing) * 3);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      margin-bottom: calc(var(--spacing) * 4);
    }
    .booking-dates {
      display: flex;
      gap: calc(var(--spacing) * 2);
      margin-bottom: calc(var(--spacing) * 3);
    }
    .booking-date {
      flex: 1;
    }

    /* Sezione commenti */
    .comment-section {
      background-color: white;
      border-radius: var(--border-radius);
      padding: calc(var(--spacing) * 3);
      box-shadow: var(--shadow);
      margin-bottom: calc(var(--spacing) * 4);
    }
    .comment-card {
      margin-bottom: calc(var(--spacing) * 2);
    }
    .leave-comment textarea {
      resize: vertical;
    }
  </style>
</head>

<body>
  <header>
    <div class="container header-container">
      <a href="index.html" class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        Best Booking
      </a>

      <button id="mobileMenuBtn" class="mobile-menu-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>

      <nav id="navMenu" class="nav-menu">
        <ul>
          <li><a href="index.html">Inicio</a></li>
          <li><a href="search.html">Buscar</a></li>
          <li id="authLinks"></li>
        </ul>
      </nav>
    </div>
  </header>

  <div id="alertContainer"></div>

  <main class="container">
    <!-- ========================================= -->
    <!-- ====== Dettaglio Alojamiento =========== -->
    <!-- ========================================= -->
    <div id="propertyDetail" class="property-detail">
      <!-- Sarà popolato dinamicamente da detail.js -->
      <p class="text-center" style="padding:2rem;">Cargando detalles del alojamiento...</p>
    </div>

    <!-- ========================================= -->
    <!-- ====== Modulo Prenotazione ============== -->
    <!-- ========================================= -->
    <div id="bookingContainer" class="booking-form">
      <h2>Reservar este alojamiento</h2>
      <form id="bookingForm">
        <div class="booking-dates">
          <div class="booking-date">
            <div class="form-group">
              <label for="fechaInicio" class="form-label">Fecha de llegada</label>
              <input type="date" id="fechaInicio" class="form-control" required>
              <div id="fechaInicioError" class="invalid-feedback"></div>
            </div>
          </div>
          <div class="booking-date">
            <div class="form-group">
              <label for="fechaFin" class="form-label">Fecha de salida</label>
              <input type="date" id="fechaFin" class="form-control" required>
              <div id="fechaFinError" class="invalid-feedback"></div>
            </div>
          </div>
        </div>

        <!-- Prezzo totale mostrato dinamicamente -->
        <p id="totalPriceDisplay" style="font-weight:bold; margin-top:1rem;">
          Precio total: € 0.00
        </p>

        <button type="submit" id="bookBtn" class="btn btn-primary btn-block">
          Reservar ahora
        </button>
      </form>
    </div>

    <!-- ========================================= -->
    <!-- ====== Sezione Commenti ================= -->
    <!-- ========================================= -->
    <div class="comment-section">
      <h3>Recensioni</h3>

      <!-- Container per la lista dei commenti -->
      <div id="commentsContainer">
        <p class="text-center">Cargando comentarios...</p>
      </div>

      <!-- Sezione "Lascia un commento" sempre visibile -->
      <div class="leave-comment" style="margin-top:2rem;">
        <h4>Lascia la tua recensione</h4>
        <textarea id="commentTextarea" class="form-control" rows="4" placeholder="Scrivi qui il tuo commento..."></textarea>
        <button id="submitCommentBtn" class="btn btn-primary btn-disabled" disabled
                style="margin-top:0.5rem;">
          Publicar comentario
        </button>
        <p id="commentLoginHint" class="text-muted" style="font-size:0.9rem; margin-top:0.5rem;">
          Debes <a href="login.html">iniciar sesión</a> para publicar una reseña.
        </p>
      </div>
    </div>
  </main>

  <footer>
    <div class="container">
      <p>&copy; 2025 Best Booking</p>
    </div>
  </footer>

  <script src="static/js/fetch-api.js"></script>
  <script src="static/js/detail.js"></script>
</body>

</html>
